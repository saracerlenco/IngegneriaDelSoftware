{
    "openapi": "3.0.0",
    "info": {
        "version": "1.0",
        "title": "DiscoverTrento API",
        "description": "API eventi"
    },
    "paths": {
        "/eventi": {
            "get": {
                "summary": "Lista degli eventi",
                "description": "Restituisce la lista degli eventi, filtrabili per tipologia o data",
                "parameters": [
                    {
                        "name": "tipologia",
                        "in": "query",
                        "schema": { "enum": ["sportivo", "culturale", "volontariato"] },
                        "description": "Tipologia dell'evento",
                        "example": "sportivo o culturale"
                    },
                    {
                        "name": "data",
                        "in": "query",
                        "schema": { 
                            "type": "string",
                            "format": "date"
                        },
                        "description": "Data dell'evento (formato: YYYY-MM-DD"
                    },
                    {
                        "name": "luogo",
                        "in": "query",
                        "schema": { "type": "string "},
                        "description": "Luogo dell'evento",
                        "example": "Piazza Duomo"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista degli eventi",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "type": "object",
                                        "properties": {
                                            "id_evento": { "type": "string" },
                                            "nome_evento": { "type": "string" },
                                            "data": { "type": "string", "format": "date" },
                                            "luogo": { "type": "string " },
                                            "tipologia": { "enum": ["sportivo", "culturale", "volontariato"] },
                                            "descrizione": { "type": "string "},
                                            "punti": { "type": "integer" }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Errore del server"
                    }
                }
            }
        },

        "/eventi/partecipa/{id_evento}": {
            "post": {
                "summary": "Partecipazione ad un evento",
                "description": "Permette agli utenti cittadini che hanno effettuato il login di segnare la propria partecipazione ad un evento, visualizzandolo poi aggiunto alla propria to-attend-list",
                "parameters": [
                    {
                        "name": "id_evento",
                        "in": "path",
                        "required": true,
                        "schema": { "type": "string" },
                        "description": "ID dell'evento"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Partecipazione all'evento segnata con successo"
                    },
                    "404": {
                        "description": "Evento non trovato"
                    },
                    "500": {
                        "description": "errore del server"
                    }
                }
            }
        },

        "/eventi/proponi": {
            "post": {
                "summary": "Proposta evento",
                "description": "Consente a cittadini e operatore comunale di proporre un evento, specifcandone i dettagli, luogo e data",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "nome_evento": { "type": "string" },
                                    "data": { "type": "string", "format": "date" },
                                    "luogo": { "type": "string " },
                                    "tipologia": { "enum": ["sportivo", "culturale", "volontariato"] },
                                    "descrizione": { "type": "string "}
                                },
                                "required": ["nome_evento", "data", "luogo", "tipologia"]
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "La proposta dell'evento è avvenuta con successo"
                    },
                    "400": {
                        "description": "I dati inseriti non sono tutti validi o mancano"
                    },
                    "500": {
                        "description": "Errore del server"
                    }
                }
            }
        },

        "/eventi/sponsorizza/{id_evento}": {
            "post": {
                "summary": "Richiesta sponsorizzazione evento",
                "description": "Permette alle aziende di proporsi come sponsor per un evento",
                "parameters": [
                    {
                        "name": "id_evento",
                        "in": "path",
                        "required": true,
                        "schema": { "type": "string" },
                        "description": "ID dell'evento"
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "nome_azienza": { "type": "string" },
                                    "contatto": { "type": "string" },
                                    "email": { "type": "string" },
                                    "annotazioni": { "type": "string" }
                                },
                                "required": ["nome_azienda", "contatto", "email"]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "La richiesta di sponsorizzazione è stata inviata al comune con successo"
                    },
                    "400": {
                        "description": "Dati non validi o mancanti"
                    },
                    "404": {
                        "description": "Evento non trovato"
                    },
                    "500": {
                        "description": "Errore del server"
                    }
                }
            }
        }
    }
}